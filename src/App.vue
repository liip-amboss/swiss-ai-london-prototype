<template>
  <div id="app">
    <div class="master">
      <header class="site-header">
        <img src="transport-for-london.svg" />
        <select class="form-select">
          <option>Select a bus route</option>
          <option>Apples</option>
          <option>Bananas</option>
          <option>Grapes</option>
          <option>Oranges</option>
        </select>
        <div>
          <div class="switch-poi">
            <span>Show the POIs</span>
            <custom-switch @change="toggleMapstyle" />
          </div>
          <button class="start-bus" @click="startBus">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
            >
              <g fill="none" fill-rule="evenodd">
                <path
                  fill="#fff"
                  d="M23.242 3.1h-2.153v-.502A.602.602 0 0 0 20.487 2H3.517a.603.603 0 0 0-.604.598V3.1H.761C.34 3.1 0 3.438 0 3.853V7.02c0 .417.341.754.76.754.422 0 .762-.338.762-.754V4.607h1.39v15.211c0 .33.273.598.604.598h.574v1.166c0 .23.19.418.422.418H5.57a.421.421 0 0 0 .422-.418v-1.166h12.024v1.166c0 .23.19.418.423.418h1.055a.421.421 0 0 0 .423-.418v-1.166h.568a.602.602 0 0 0 .603-.598V4.608h1.39V7.02c0 .416.342.753.762.753S24 7.437 24 7.021V3.854a.753.753 0 0 0-.758-.754zM4.724 18.028a.522.522 0 0 1-.524-.519c0-.285.235-.518.524-.518.288 0 .523.233.523.518a.522.522 0 0 1-.523.519zm2.244.3a.825.825 0 0 1-.827-.82c0-.45.372-.819.827-.819.456 0 .828.369.828.82a.825.825 0 0 1-.828.819zm10.096 0a.824.824 0 0 1-.826-.82c0-.45.37-.819.826-.819.456 0 .828.369.828.82a.826.826 0 0 1-.828.819zm2.245-.3a.522.522 0 0 1-.523-.519.522.522 0 1 1 1.047 0 .522.522 0 0 1-.524.519zm.949-3.233c0 .33-.247.599-.549.599H4.294c-.302 0-.548-.27-.548-.599V5.468c0-.108.026-.21.073-.299a.545.545 0 0 0 .475.3H19.71c.203 0 .38-.121.475-.3.046.087.074.19.074.3v9.326z"
                />
              </g>
            </svg>
            <span v-if="restarted">
              Bus restarted
            </span>
            <span v-else-if="started">
              Restart the bus
            </span>
            <span v-else>
              Start the bus
            </span>
          </button>
        </div>

        <div>
          <span class="powered-by">powered by</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="116"
            height="15"
            viewBox="0 0 200 27"
          >
            <path
              fill="#9e9e9e"
              fill-rule="evenodd"
              d="M77.973 8.683c.999.013 1.998.028 2.997.004.599-.015.85.194.848.833-.017 5.431-.016 10.863-.003 16.295.001.64-.296.855-.87.851a191.31 191.31 0 0 0-3.14 0c-.601.006-.84-.26-.835-.878.02-2.716.008-5.432.008-8.148V9.637c0-.892.086-.965.995-.954zm99.925-1.155c1.52.087 3.021.469 4.537.666 2.197.286 4.177 1.135 5.923 2.494 1.23.957 1.933 2.288 1.934 3.934v5.334c0 1.9-.017 3.803.01 5.703.01.64-.207.898-.834.867-.718-.036-1.438-.017-2.157-.006-.467.007-.755-.17-.901-.66-.292-.972-.993-1.318-1.957-1.065-1.38.363-2.794.607-4.145 1.057-4.039 1.347-8.174.626-12.26.588-1.455-.014-2.97-.747-4.013-2.023-.967-1.183-1.168-2.604-.89-4.051.262-1.362.92-2.493 2.228-3.152.833-.42 1.698-.582 2.584-.791 3.34-.789 6.701-.762 10.078-.476 1.883.159 3.759.404 5.642.559 1.092.09 1.434-.334 1.47-1.472.037-1.18-.899-2.166-2.035-2.688-2.092-.962-4.288-.801-6.45-1.11-2.803-.4-5.527.163-8.282.351-.967.066-1.92.338-2.885.44-.213.023-.631-.247-.657-.428-.122-.85-.155-1.716-.191-2.577-.022-.5.32-.692.737-.738.523-.057 1.06-.026 1.574-.123 3.622-.68 7.277-.844 10.94-.633zm-160.62-.041c.911.017 1.815.273 2.726.375 1.225.138 2.455.234 3.683.342.289.026.583.002.87.04.62.079.979.316.747 1.081-.133.439-.115.937-.105 1.407.015.735-.325.973-.993.873-1.48-.222-2.958-.576-4.443-.618A264.005 264.005 0 0 0 8.22 10.93c-.744.012-1.537.43-2.209.834-.978.589-.935 2.355-.046 3.1.701.587 1.488.77 2.361.78 3.051.036 6.102.124 9.152.127 2.112.002 4.21.025 6.246.693.563.185 1.147.326 1.68.58 1.315.623 1.62 1.94 1.815 3.203.41 2.68-1.62 5.293-4.23 5.624-.4.05-.781.229-1.176.324-.606.148-1.211.353-1.825.393-1.184.078-2.372.064-3.56.074-1.161.01-2.324.002-3.486.002v-.058c-2.422 0-4.844.004-7.266-.006-.286 0-.574-.064-.857-.121-1.058-.213-2.107-.484-3.173-.634-.636-.089-.917-.332-.861-.993.042-.494.061-.993.06-1.49-.002-.639.346-.847.889-.757.474.08.931.28 1.406.343 1.127.147 2.258.302 3.392.35 2.707.113 5.417.216 8.126.226 1.69.006 3.389-.094 5.07-.28 1.494-.164 2.9-1.612 2.207-3.252-.11-.26-.287-.601-.51-.683-.962-.35-1.823-.929-2.94-.924-4.335.016-8.67-.06-13.004-.126-1.625-.025-3.204-.412-4.377-1.596-1.704-1.72-1.373-5.269.55-6.777 1.221-.958 2.61-1.457 4.14-1.772 3.809-.786 7.644-.7 11.484-.627zm86.654-.013c1.334.025 2.662.336 3.996.474 1.132.118 2.268.176 3.403.258.231.017.464.017.695.036.618.051.928.361.81 1.071-.072.44-.09.892-.149 1.336-.127.97-.268 1.111-1.187.94-4.805-.895-9.646-.918-14.496-.7-.655.029-1.326.203-1.948.436-1.25.469-1.592 1.1-1.46 2.426.081.82.923 1.71 1.89 1.804 1.363.133 2.735.176 4.104.203 2.253.044 4.507.092 6.76.045 1.595-.033 3.147.144 4.67.643.653.214 1.354.346 1.941.694 1.41.835 1.576 2.368 1.584 3.874.005.7-.228 1.423-.443 2.102-.54 1.705-1.859 2.369-3.353 2.77-.467.125-.926.283-1.395.397-.583.141-1.171.348-1.76.359-2.252.042-4.506.017-6.759.018-2.3 0-4.599.023-6.898-.017-.544-.009-1.082-.238-1.626-.347-.723-.146-1.445-.308-2.175-.4-.899-.115-1.001-.199-.963-1.14.018-.423.032-.85.097-1.266.124-.806.379-1.06 1.092-.814 2.352.812 4.773.654 7.182.719 1.716.046 3.431.174 5.147.176 1.414.001 2.827-.155 4.24-.194.985-.027 1.738-.539 2.379-1.243.8-.878.33-2.43-.651-2.991-1.692-.97-3.485-.679-5.247-.727-3.25-.088-6.504-.04-9.754-.134-1.513-.044-2.966-.465-4.13-1.607-1.015-.994-1.314-3.353-.787-4.71 1.032-2.654 3.148-3.341 5.494-3.876 3.216-.733 6.455-.674 9.697-.615zm29.625.012c1.307-.015 2.617.311 3.928.45 1.107.116 2.219.187 3.329.275.138.01.278 0 .418.007 1.338.066 1.456.236 1.13 1.6-.052.216-.091.438-.111.66-.103 1.112-.275 1.286-1.316 1.089-4.85-.92-9.738-.904-14.632-.67-.671.033-1.363.284-1.988.575-.946.442-1.314 1.27-1.17 2.296.11.768.983 1.655 1.957 1.764 1.312.148 2.639.194 3.96.215 2.809.044 5.62-.015 8.427.092 1.12.042 2.23.4 3.34.638.47.1.99.156 1.38.415 2.06 1.37 2.373 3.001 1.741 5.532-.398 1.596-1.332 2.34-2.465 3.074-.04.025-.08.055-.124.067-1.29.354-2.567.92-3.874 1.013-2.311.167-4.641.047-6.963.047-2.298 0-4.597.009-6.895-.009-.364-.002-.727-.12-1.09-.19-.973-.188-1.942-.415-2.92-.561-.844-.127-.984-.22-.945-1.1.022-.492.134-.98.186-1.471.07-.667.461-.856.981-.681 3.53 1.193 7.195.614 10.791.912 2.09.173 4.217-.097 6.322-.248 1.158-.083 2.611-1.21 2.254-2.954-.119-.577-.406-.885-.901-1.194-1.69-1.055-3.527-.674-5.305-.73-3.225-.103-6.454-.08-9.68-.126a6.503 6.503 0 0 1-4.161-1.54c-.785-.654-.974-1.714-.98-2.681-.012-2.67.616-3.933 2.898-5.107 1.239-.638 2.556-.619 3.814-.969 2.874-.799 5.775-.455 8.664-.49zm62.506 1.2c.999.047 2.002.023 3.003.01.661-.009.936.26.934.917-.017 5.387-.02 10.775-.002 16.162.002.644-.29.876-.891.877l-2.053-.003c-.342.001-.684.006-1.026.016-.668.022-.866-.267-.862-.871.018-2.73.008-5.46.008-8.19h-.01c0-2.681.015-5.363-.012-8.045-.007-.66.213-.907.91-.874zm-126.156.03c1.056.102 2.128.029 3.193.037.042 0 .083.04.233.113-.092.208-.153.445-.285.629-1.976 2.756-3.972 5.498-5.942 8.258-1.875 2.626-3.71 5.282-5.604 7.893-.295.407-.774.746-1.24.938-.458.189-.901-.06-1.222-.496-1.127-1.527-2.275-3.037-3.411-4.557-1.052-1.409-2.088-2.83-3.153-4.228-.473-.622-1.423-.56-1.892.065-1.722 2.299-3.454 4.59-5.176 6.89-.44.588-.816 1.23-1.296 1.78-.77.886-1.605.826-2.284-.122-2.183-3.05-4.352-6.11-6.538-9.159-1.603-2.236-3.227-4.458-4.833-6.693-.243-.339-.438-.713-.76-1.242.516-.04.813-.081 1.11-.083 1.279-.007 2.558.017 3.836-.01.578-.012.987.195 1.318.667 1.839 2.624 3.69 5.24 5.535 7.858.328.465.646.937.974 1.402.531.752 1.295.718 1.84-.027 1.106-1.51 2.242-2.999 3.368-4.494.942-1.25 1.895-2.493 2.831-3.749.616-.825 1.494-.827 2.109-.009 1.965 2.62 3.94 5.234 5.909 7.851.085.113.152.24.225.363.494.83 1.295.855 1.868.05 1.786-2.513 3.567-5.03 5.354-7.542.179-.252.444-.458.562-.733.661-1.539 1.88-1.792 3.371-1.65zm101.117 9.68c-.798.055-1.608.549-2.327.991-.565.348-.715 1.442-.484 2.065.489 1.314 1.483 1.796 2.764 1.806 4.304.035 8.61.176 12.837-.982.895-.246 1.182-.834 1.394-1.578.203-.712-.031-1.384-.581-1.778-.424-.303-1.015-.48-1.537-.494-1.986-.056-3.975-.023-5.962-.023v-.054c-2.036 0-4.077-.093-6.104.047zM82.3.532c.915.37.715 1.077.705 1.72-.01.624-.416 1.043-1.087 1.195-.657.148-1.348.192-1.967.274-.625-.083-1.17-.166-1.718-.225-.84-.09-1.144-.56-1.224-1.213-.174-1.41.193-1.874 1.83-2.19 1.209-.233 2.357-.006 3.46.44zm116.973.976c.589.149.79.611.71 1.083-.073.427-.245.831-.896.943-.496.085-1.003.136-1.39.187-.494-.042-.86-.09-1.227-.1-1.245-.034-1.672-1.288-1.005-1.823.368-.296 1-.527 1.533-.552.752-.034 1.553.08 2.275.262z"
            />
          </svg>
        </div>
      </header>
      <main>
        <Map class="map" ref="mapRef" />
      </main>
      <liip-icon />
    </div>
  </div>
</template>

<script>
import Map from "@/components/Map";
import CustomSwitch from "@/components/Switch";
import LiipIcon from "@/components/LiipIcon";

export default {
  name: "app",
  components: {
    Map,
    CustomSwitch,
    LiipIcon
  },
  data() {
    return {
      started: false,
      restarted: false
    };
  },
  methods: {
    startBus() {
      if (!this.started) {
        this.started = true;
        this.$refs.mapRef.startBus();
      } else if (!this.restarted) {
        this.restarted = true;
        this.$refs.mapRef.startBus();
        setTimeout(() => {
          this.restarted = false;
        }, 1000);
      }
    },
    toggleMapstyle() {
      this.$refs.mapRef.toggleMapstyle();
    }
  }
};
</script>

<style>
html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-family: "Work Sans", sans-serif;
  color: #353535;
  font-size: 14px;
}

body {
  margin: 0;
}

.master,
.map {
  min-height: 100vh;
}

.site-header {
  padding: 1.5rem;
  height: 300px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  position: absolute;
  left: 0;
  top: 0;
  z-index: 2;
  background-color: white;
  box-shadow: 5px 5px 20px 0 rgba(0, 0, 0, 0.2);
}

.powered-by {
  color: #9e9e9e;
  padding-right: 0.5rem;
}

.switch-poi {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.start-bus {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  margin-top: 1.5em;

  padding: 0.75rem;
  font-weight: bold;
  border: 0;
  border-radius: 18px;
  cursor: pointer;
  background-color: #1c3e94;
  color: white;
}

.start-bus:focus {
  outline: none;
}

.start-bus span {
  padding-left: 0.5em;
  font-size: 1rem;
}

/* form select */
.form-select {
  display: block;
  color: #444;
  line-height: 1.3;
  padding: 0.6em 1.4em 0.5em 0.8em;
  width: 100%;
  font-size: 1rem;
  max-width: 100%;
  box-sizing: border-box;
  margin: 0;
  border: 2px solid #aaa;
  border-radius: 0.5em;
  -moz-appearance: none;
  -webkit-appearance: none;
  appearance: none;
  background-color: white;
  background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTUgMjU1Ij4gIDxwYXRoIGZpbGw9IiM4RDhEOEQiIGQ9Ik0wIDYzLjc1bDEyNy41IDEyNy41TDI1NSA2My43NXoiLz48L3N2Zz4=);
  background-repeat: no-repeat, repeat;
  background-position: right 0.7em top 50%, 0 0;
  background-size: 0.65em auto, 100%;
}

.form-select::-ms-expand {
  display: none;
}

.form-select:hover {
  border-color: #888;
}

.form-select:focus {
  border-color: #aaa;
  box-shadow: 0 0 1px 3px rgba(59, 153, 252, 0.7);
  box-shadow: 0 0 0 3px -moz-mac-focusring;
  color: #222;
  outline: none;
}

.form-select option {
  font-weight: normal;
}
</style>
